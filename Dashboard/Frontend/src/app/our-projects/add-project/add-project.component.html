<ui5-dialog header-text="Add" [open]="isOpen" id="dialog">
  <ui5-bar slot="header" design="Header">
    <ui5-title level="H5" slot="startContent">Add</ui5-title>
    <ui5-button
      class="dialogCloser"
      design="Transparent"
      id="closeDialogButton"
      slot="endContent"
      (click)="closeDialog()"
      icon="decline"
    ></ui5-button>
  </ui5-bar>

  <app-form-preloader *ngIf="loading"></app-form-preloader>
  <ui5-message-strip
    design="Critical"
    *ngIf="errorMessage"
    (close)="clearErrorMessage($event)"
  >
    <ui5-icon name="alert" slot="icon"></ui5-icon> {{ errorMessage }}
  </ui5-message-strip>
  <ui5-message-strip
    design="Negative"
    *ngIf="fileTypeError"
    (close)="clearFileTypeError($event)"
  >
    <ui5-icon name="alert" slot="icon"></ui5-icon> {{ fileTypeError }}
  </ui5-message-strip>

  <ui5-tabcontainer>
    <ui5-tab text="Info" design="Inline" class="info-tab">
      <div class="row">
        <div class="col-md-12">
          <div class="d-flex align-items-center mb-3">
            <span>Active:</span>
            <ui5-switch checked (click)="toggleActive($event)"></ui5-switch>
          </div>
          <ui5-label show-colon required>Title</ui5-label>
          <ui5-textarea
            class="titleInput"
            [(ngModel)]="title"
            name="title"
            placeholder="Enter title"
            required
          >
          </ui5-textarea>
          <ui5-label show-colon required>Sub-title</ui5-label>
          <ui5-textarea
            class="textArea1"
            [(ngModel)]="subtitle"
            name="subtitle"
            placeholder="Enter Sub-title"
            required
          ></ui5-textarea>
          <ui5-label show-colon required>Description</ui5-label>
          <angular-editor
            [placeholder]="placeholder"
            [config]="editorConfig"
            [(ngModel)]="description"
          >
          </angular-editor>
        </div>
      </div>
    </ui5-tab>

    <ui5-tab text="Attachment" design="Inline">
      <section class="tab-content">
        <div class="row">
          <div class="col-md-12">
            <div class="img-upload">
              <ui5-label show-colon required>Images (Multiple, Max {{ MAX_FILES }})</ui5-label>
              <div
                class="upload-card"
                [class.disabled]="selectedFiles.length >= MAX_FILES"
                (click)="selectedFiles.length < MAX_FILES ? fileUpload.click() : null"
              >
                <img
                  src="../../../assets/img/file-upload.png"
                  height="60px"
                  alt="Upload Icon"
                />
                <div class="upload-text">Click to upload or drag and drop</div>
                <div class="upload-subtext">SVG, PNG, JPG (max. 2MB)</div>
                <input
                  #fileUpload
                  type="file"
                  class="file-input"
                  (change)="onFileSelect($event)"
                  accept="image/*"
                  multiple
                  [disabled]="selectedFiles.length >= MAX_FILES"
                />
              </div>

              <!-- Image Preview -->
              <div
                *ngIf="selectedFilesUrl.length > 0"
                class="preview-container"
              >
                <div
                  *ngFor="let file of selectedFilesUrl"
                  class="image-preview"
                >
                  <img
                    [src]="file.url"
                    alt="Selected Image"
                    class="preview-image"
                  />
                  <div class="preview-actions">
                    <ui5-button
                      design="Negative"
                      (click)="removeImage(file.name)"
                      icon="decline"
                      tooltip="Remove Image"
                      class="remove-button"
                    ></ui5-button>
                  </div>
                </div>
              </div>
              <div
                *ngIf="selectedFiles.length === 0"
                class="text-danger small mt-1"
              >
                Please upload at least one image
              </div>
            </div>
          </div>
        </div>
      </section>
    </ui5-tab>
  </ui5-tabcontainer>

  <ui5-toolbar slot="footer">
    <ui5-toolbar-button
      design="Emphasized"
      [disabled]="loading"
      (click)="insertData()"
      text="Submit"
    >
    </ui5-toolbar-button>

    <ui5-toolbar-button
      design="Transparent"
      text="Cancel"
      (click)="closeDialog()"
    ></ui5-toolbar-button>
  </ui5-toolbar>
</ui5-dialog>

<app-toast-message
  [IsOpenToastAlert]="IsOpenToastAlert"
  [ToastType]="ToastType"
></app-toast-message>